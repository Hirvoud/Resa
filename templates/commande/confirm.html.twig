{% extends 'base.html.twig' %}

{% block body %}

    <div class="row">
        <div class="col-lg-12">
            <div class="main-title">
                <h1>Billetterie du Musée du Louvre</h1>
            </div>
        </div>
    </div>



    <div>
        <h2>Détail de votre commande</h2>
        <p>Vous trouverez ci-dessous la liste des différents billets composant votre commande.</p>
        <div class="row ticket-summary">
            {% for billet in billets %}
                <div class="col-lg-2">
                    <p><strong>Billet {{ loop.index }}</strong></p>
                    <p><strong>Prénom</strong> : {{ billet.prenom }}</p>
                    <p><strong>Nom</strong> : {{ billet.nom }}</p>
                    <p><strong>Age</strong> : {{ billet.visitAge }} ans</p>
                    <p><strong>Tarif</strong> : {{ billet.tarif }} €</p>
                </div>
            {% endfor %}
        </div>

    </div>

    {% for message in app.flashes("error") %}
        <div class="flash-notice">
            {{ message }}<br />
        </div>
    {% endfor %}

    <div>
        <p>Le prix total de votre commande s'élève à <strong>{{ commande.prixTotal }} €</strong>.</p>
    </div>

    <div>
        <p>Veuillez cliquer sur le lien suivant pour procéder au paiement.</p>

        <form action="{{ path('checkout') }}" method="POST">
            <script
                    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                    data-key={{ stripe_key }}
                    data-amount="{{ commande.prixTotal * 100 }}"
                    data-name="Billetterie du Louvre"
                    data-description="Paiement"
                    data-email="{{ commande.email }}"
                    data-locale="auto"
                    data-currency="eur"
                    data-label="Payer par carte bancaire">
            </script>
        </form>
    </div>

    <div class="row">
        <div class="col-lg-12 cancel">
            <a href="{{ path("cancel") }}"><button class="btn btn-danger">Annuler la commande</button></a>
        </div>
    </div>

{% endblock %}
